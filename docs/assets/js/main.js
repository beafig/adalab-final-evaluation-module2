"use strict";const cocktailList=document.querySelector(".js-cocktails"),favouritesList=document.querySelector(".js-favourites"),inputElement=document.querySelector(".js-input"),searchBtn=document.querySelector(".js-searchBtn"),resetBtn=document.querySelector(".js-resetBtn"),urlMargaritas="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita";let allCocktails=[],favCocktails=[];function map(t){allCocktails=t.drinks.map(t=>({name:t.strDrink,photo:t.strDrinkThumb,id:t.idDrink,alcocholic:t.strAlcoholic}))}fetch(urlMargaritas).then(t=>t.json()).then(t=>{map(t),renderCocktails(allCocktails),addEvent()});const localFav=JSON.parse(localStorage.getItem("cocktails"));function searchFav(){localFav&&(favCocktails=localFav,renderFavourites(favCocktails))}function renderCocktails(t){cocktailList.innerHTML="";for(const e of t){const t=favCocktails.findIndex(t=>t.id===e.id);let a=e.photo,i="",l="";-1!==t&&(i="selected"),favCocktails===[]&&(i=""),a||(a="./assets/images/cocktails.png"),l="Alcoholic"===e.alcocholic?"Tiene alcohol":"Sin alcohol";const c=`<li class="js-liElement main__list--cocktails ${i}" id="${e.id}"><h3 class="main__list--name main__list--name2">${e.name}</h3> <p>${l}</p><img src="${a}" title="${e.name}" alt="${e.name}" class="main__list--img main__list--img2"/></li>`;cocktailList.innerHTML+=c}addEvent()}function handleClickBtn(t){t.preventDefault();const e=inputElement.value;fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+e).then(t=>t.json()).then(t=>{null===t.drinks?cocktailList.innerHTML="Lo sentimos, el cóctel buscado no está en la lista":(map(t),cocktailList.innerHTML="",renderCocktails(allCocktails))})}function handleClickList(t){const e=allCocktails.find(e=>e.id===t.currentTarget.id),a=favCocktails.findIndex(e=>e.id===t.currentTarget.id);-1===a?(t.currentTarget.classList.add("selected"),favCocktails.push(e),renderFavourites(favCocktails),localStorage.setItem("cocktails",JSON.stringify(favCocktails))):(t.currentTarget.classList.remove("selected"),favCocktails.splice(a,1),renderFavourites(favCocktails),localStorage.removeItem("cocktails"),localStorage.setItem("cocktails",JSON.stringify(favCocktails)))}function renderFavourites(t){favouritesList.innerHTML="";for(const e of t)favouritesList.innerHTML+=`<li class="main__list--cocktails js-favouritesElement" id="${e.id}"><h3 class="main__list--name">${e.name}<i class="fa-solid fa-xmark js-closeIcon" id="${e.id}"></i></h3> <img class="main__list--img img" src="${e.photo}" title="${e.name}" alt="${e.name}" class="main__list--img"/> </li>`;addCloseBtn(),addListener()}function handleClickReset(t){t.preventDefault(),favCocktails=[],favouritesList.innerHTML="",localStorage.removeItem("cocktails"),renderCocktails(allCocktails)}function handleClickClose(t){const e=favCocktails.findIndex(e=>e.id===t.currentTarget.id);favCocktails.splice(e,1),localStorage.removeItem("cocktails"),renderFavourites(favCocktails),renderCocktails(allCocktails),localStorage.setItem("cocktails",JSON.stringify(favCocktails))}function handleIntro(t){"Enter"===t.code&&handleClickBtn(t)}function handleClickFavourites(t){const e=favCocktails.find(e=>e.id===t.currentTarget.id);console.log(e.name)}function addEvent(){const t=document.querySelectorAll(".js-liElement");for(const e of t)e.addEventListener("click",handleClickList)}function addCloseBtn(){const t=document.querySelectorAll(".js-closeIcon");for(const e of t)e.addEventListener("click",handleClickClose)}function addListener(){const t=document.querySelectorAll(".js-favouritesElement");for(const e of t)e.addEventListener("click",handleClickFavourites)}searchFav(),searchBtn.addEventListener("click",handleClickBtn),resetBtn.addEventListener("click",handleClickReset),inputElement.addEventListener("keyup",handleIntro);